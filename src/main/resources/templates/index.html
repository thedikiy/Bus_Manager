<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8"/>
	<title>Bus List</title>	
	<link rel="stylesheet" href="webjars/bootstrap/3.3.7-1/css/bootstrap.css"/>
	<link rel="stylesheet" href="/css/style.css"/>
	<script src="webjars/jquery/1.11.1/jquery.js"></script>
	<script src="webjars/underscore/1.8.3/underscore.js"></script>
	<script src="webjars/backbone/1.3.3/backbone.js"></script>
</head>	
<body>
	<div class="container">	
		<h1>Buses</h1>
		<table class="table">
			<thead>
				<tr>
					<th>Model</th>
					<th>Registration Number</th>
					<th>Action</th>
				</tr>
				<tr>
					<td><input class = "form-control bus-model-input"/></td>
					<td><input class = "form-control registration-number-input"/></td>
					<td><button class = "btn btn-primary add-bus">Add</button></td>
				</tr>
			</thead>
			<tbody class="bus-list"></tbody>
		</table>
	</div>
	<script type="text/template" class="bus-list-template">
		<td><span class="bus-model"><%= busModel %></span></td>
		<td><span class="registration-number"><%= registrationNumber %></span></td>
		<td>
			<button class="btn btn-warning edit-bus">Edit</button>
			<button class="btn btn-danger delete-bus">Delete</button>
			<button class="btn btn-success update-bus">Update</button>
			<button class="btn btn-danger cancel">Cancel</button>
		</td>
	</script>
	<script src="/js/bus.js"></script>
	<script id="connect-loader" data-options="sizeToParent:true;">
        (function() {
            var getUrlParam = function (param) {
                var codedParam = (new RegExp(param + '=([^&]*)')).exec(window.location.search)[1];
                return decodeURIComponent(codedParam);
            };

            var baseUrl = getUrlParam('xdm_e') + getUrlParam('cp');
            var options = document.getElementById('connect-loader').getAttribute('data-options');

            var script = document.createElement("script");
            script.src = baseUrl + '/atlassian-connect/all.js';

            if(options) {
                script.setAttribute('data-options', options);
            }

            document.getElementsByTagName("head")[0].appendChild(script);
        })();
	</script>
</body>
</html>